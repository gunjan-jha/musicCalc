var pitchNames = [
  "E0",
  "F0",
  "F#0",
  "G0",
  "G#0",
  "A0",
  "A#0",
  "B0",
  "C1",
  "C#1",
  "D1",
  "D#1",
  "E1",
  "F1",
  "F#1",
  "G1",
  "G#1",
  "A1",
  "A#1",
  "B1",
  "C2",
  "C#2",
  "D2",
  "D#2",
  "E2",
  "F2",
  "F#2",
  "G2",
  "G#2",
  "A2",
  "A#2",
  "B2",
  "C3",
  "C#3",
  "D3",
  "D#3",
  "E3",
  "F3",
  "F#3",
  "G3",
  "G#3",
  "A3",
  "A#3",
  "B3",
  "C4",
  "C#4",
  "D4",
  "D#4",
  "E4",
  "F4",
  "F#4",
  "G4",
  "G#4",
  "A4",
];
var pitchFrequency = [
  20.6, 21.9, 23.2, 24.5, 26, 27.5, 29.2, 30.9, 32.7, 34.7, 36.7, 38.9, 41.2,
  43.7, 46.3, 49, 51.9, 55, 58.3, 61.7, 65.4, 69.3, 73.4, 77.8, 82.4, 87.3,
  92.5, 98, 103.8, 110, 116.5, 123.5, 130.8, 138.6, 146.8, 155.6, 164.8, 174.6,
  185, 196, 207.7, 220, 233.1, 246.9, 261.6, 277.2, 293.7, 311.1, 329.6, 349.2,
  370, 392, 415.3, 440,
];
var plainSteelValues = [
  0.000193758945422, 0.0002532259765976, 0.0002859060567932, 0.0003203719337208,
  0.0003569807667268, 0.000395553976138, 0.0004360915619544, 0.000478593524176,
  0.000523238442476, 0.000569669157508, 0.0006686022964608, 0.0007209261407084,
  0.0007753929410344, 0.0008900410912288, 0.0010127253267172,
  0.0011432670678264, 0.0012816663145564, 0.0014281016465804,
  0.0015823944842252, 0.0019147312560504, 0.002278676630032, 0.00267423060617,
];
var nickelPlatedSteel = [
  0.0009864741147568, 0.001109872668938, 0.0012405929897204, 0.001338454650634,
  0.0014809612298476, 0.0016400757186688, 0.0019388395119324,
  0.0022627830391172, 0.0026190494871512, 0.0030779992472752,
  0.0034549809374004, 0.003855535144388, 0.0042794832885648, 0.0047271825292772,
  0.0049880874318224, 0.0057643732712228, 0.0062827900625224,
  0.0068246007910112, 0.0073899840363624, 0.0076814260630248,
  0.0085912894979788, 0.0096143724457416, 0.0102858320169736,
  0.0114632078023812, 0.0118830486140744, 0.0126250471562204,
  0.0133906182152288, 0.0142665515122748, 0.0151103404681448,
  0.0159478791354528, 0.0168086331602768, 0.0176559937096108,
  0.0205386267944052,
];

var stainlessSteelRoundWound = [
  0.0011764828870416, 0.0014141724320708, 0.0015668580526568,
  0.0017377587999092, 0.0020538448214732, 0.0023963606346708,
  0.0027667348768876, 0.0032506857912596, 0.0036426681739336,
  0.0040589373921628, 0.0044998506052936, 0.0049652292336528,
  0.0055438273748208, 0.0060581368336368, 0.0071603305766272,
  0.0077480362811284, 0.0083603859805312, 0.0089972010951624,
  0.0100697506124016, 0.0107678185549404, 0.0165350491009344,
];
var stainlessSteelHalfRoundWound = [
  0.0020127714966372, 0.0022959988583324, 0.0026340501797, 0.003387656400604,
  0.00376803110452, 0.00458056861758, 0.00530381629404, 0.00596456108488,
  0.007109256790092, 0.0088396938234, 0.01012546747044,
];
var stainlessSteelFlatWound = [
  0.0013950644070384, 0.0017472235225888, 0.0020717027887932,
  0.0024240404840168, 0.0026220853415956, 0.0030283540981256,
  0.0034346228546556, 0.0043210923524204, 0.004735932933264, 0.0056566897282832,
  0.0061390334255964, 0.0072133687395676, 0.0077755375508012,
  0.0084007449866744, 0.0088695166288244, 0.01054959419429, 0.0159585939158448,
];
var phosphorBronzeRoundWound = [
  0.002244389332777, 0.0024377911188532, 0.0028383453258408, 0.0030731775960988,
  0.003533198834262, 0.0042594823651664, 0.0049611219011692, 0.0052275627735836,
  0.0058759855669728, 0.0064679771836308, 0.0073301598458404,
  0.0076080298173396, 0.0082443091929512, 0.0099634957068476,
  0.0114483856895056,
];

var PhosphorBronzePolished = [
  0.0014039933906984, 0.0015507858820688, 0.0171436486272, 0.0018766937856588,
  0.0020274150298396, 0.0022034945876148, 0.0023667164089196,
  0.0025710115550604, 0.0030069245373416, 0.0032308634475344,
  0.0036344535089664, 0.0040630447246464, 0.0042869836348392,
  0.0045389595537244, 0.0053686407154116, 0.0062160012647456, 0.007186938947934,
  0.0077921454604088, 0.0084589619601376, 0.0095047245263968,
  0.0097954522343664, 0.0109169325820624, 0.012144310675966,
];

var BrassRoundWound80 = [
  0.0014039933906984, 0.0015507858820688, 0.0171436486272, 0.0018766937856588,
  0.0020274150298396, 0.0022034945876148, 0.0023667164089196,
  0.0025710115550604, 0.0030069245373416, 0.0032308634475344,
  0.0036344535089664, 0.0040630447246464, 0.0042869836348392,
  0.0045389595537244, 0.0053686407154116, 0.0062160012647456, 0.007186938947934,
  0.0077921454604088, 0.0084589619601376, 0.0095047245263968,
  0.0097954522343664, 0.0109169325820624, 0.012144310675966,
];

var BrassRoundWound85 = [
  0.0017504379567064, 0.0020704527310808, 0.0022486752449344,
  0.0024172544564352, 0.0033049740119124, 0.0037214218098148,
  0.0041637636603312, 0.004394845757452, 0.004651107588494, 0.0058272333161892,
  0.006381544621802, 0.006961928559702, 0.007261942410678, 0.007601243789758,
  0.0090761333107168, 0.0097658080086152, 0.0104815553388008,
  0.0112231967216004, 0.0017504379567064, 0.0020704527310808,
  0.0022486752449344, 0.0024172544564352, 0.0033049740119124,
  0.0037214218098148, 0.0041637636603312, 0.004394845757452, 0.004651107588494,
  0.005827233316189, 0.006381544621802, 0.006961928559702, 0.007261942410678,
  0.007601243789758, 0.133310716, 0.009765808008615, 0.0104815553388,
  0.0112231967216,
];
var clearNylon = [
  0.0001635789806512, 0.000182151266664, 0.000201795030716, 0.000222510272807,
  0.000244296992937, 0.000290727707969, 0.000367874126792, 0.000395732555811,
  0.000424483883196, 0.000454128108947, 0.000485022392411, 0.00051680957424,
  0.000549668234109, 0.000583419792344, 0.000728783646329, 0.000767535435413,
  0.00080753728221, 0.000848432027373,
];
var silverCopperPlatedIron = [
  0.0009537940345612, 0.0009537940345612, 0.0011604107164536,
  0.0013229182190656, 0.0012541650448836, 0.0016854349556616,
  0.0018770509450052, 0.0020834890472244, 0.0022177809614708,
  0.0022895699900972, 0.0031988976860316, 0.003441230302564, 0.0036907061060244,
  0.003947503676086, 0.005046661564632, 0.0050571977653508, 0.0054406083237112,
  0.0059470602769064, 0.006512800681604, 0.00739319847048, 0.0081019811934108,
  0.0088396938234, 0.0096063363604476, 0.0106476344348768,
];
var stringType = [
  //string type selecto
  //A
  {
    name: "Plain Steel",
    values: [
      0.07, 0.008, 0.009, 0.0095, 0.01, 0.0105, 0.011, 0.0115, 0.012, 0.013,
      0.0135, 0.015, 0.016, 0.017, 0.018, 0.019, 0.02, 0.022, 0.024, 0.026,
    ],
  },
  //B
  {
    name: "Nickel-plated Steel",
    values: [
      0.017, 0.018, 0.019, 0.02, 0.021, 0.022, 0.024, 0.026, 0.028, 0.03, 0.032,
      0.034, 0.036, 0.038, 0.039, 0.042, 0.044, 0.046, 0.048, 0.049, 0.052,
      0.054, 0.056, 0.059, 0.06, 0.062, 0.064, 0.066, 0.068, 0.07, 0.072, 0.074,
      0.08,
    ],
  },
  //c
  {
    name: "Stainless Steel Round Wound",
    values: [
      0.018, 0.02, 0.0222, 0.024, 0.026, 0.028, 0.03, 0.032, 0.034, 0.036,
      0.038, 0.04, 0.0446, 0.048, 0.05, 0.052, 0.054, 0.056, 0.07,
    ],
  },
  //D
  {
    name: "Stainless Steel Half Round Wound",
    values: [
      0.022, 0.024, 0.003, 0.032, 0.036, 0.039, 0.042, 0.046, 0.052, 0.056,
    ],
  },
  //E
  {
    name: "Stainless steel Flat Wound",
    values: [
      0.02, 0.022, 0.0226, 0.028, 0.03, 0.032, 0.035, 0.038, 0.04, 0.042, 0.045,
      0.048, 0.052, 0.056, 0.065,
    ],
  },
  //F
  {
    name: "Phosphor Bronze Round Wound",
    values: [
      0.023, 0.024, 0.0028, 0.03, 0.032, 0.035, 0.036, 0.039, 0.042, 0.044,
      0.045, 0.0053, 0.056,
    ],
  },
  //G
  {
    name: "Phosphor Bronze Polished",
    values: [
      0.02, 0.021, 0.0223, 0.024, 0.025, 0.026, 0.027, 0.029, 0.03, 0.032,
      0.034, 0.035, 0.0039, 0.042, 0.045, 0.047, 0.049, 0.052, 0.053, 0.056,
      0.059,
    ],
  },
  //h
  {
    name: "80/20 Brass Round Wound",
    values: [
      0.02, 0.021, 0.0223, 0.024, 0.025, 0.026, 0.027, 0.029, 0.03, 0.032,
      0.034, 0.035, 0.0039, 0.042, 0.045, 0.047, 0.049, 0.052, 0.053, 0.056,
      0.059,
    ],
  },
  //I
  {
    name: "85/15 Brass Round Wound",
    values: [
      0.022, 0.024, 0.025, 0.026, 0.03, 0.032, 0.034, 0.035, 0.036, 0.04, 0.042,
      0.044, 0.045, 0.046, 0.05, 0.052, 0.054, 0.056,
    ],
  },
  //j
  {
    name: "Clear Nylon",
    values: [
      0.018, 0.019, 0.02, 0.021, 0.022, 0.024, 0.027, 0.028, 0.029, 0.03, 0.031,
      0.032, 0.033, 0.034, 0.038, 0.039, 0.04, 0.041,
    ],
  },
  //k
  {
    name: "Silver-plated Copper Wound Nylon",
    values: [
      0.019, 0.02, 0.022, 0.024, 0.025, 0.026, 0.028, 0.029, 0.03, 0.031, 0.033,
      0.034, 0.035, 0.036, 0.04, 0.041, 0.042, 0.043, 0.045, 0.048, 0.05, 0.052,
      0.054, 0.056,
    ],
  },
];

function createDropDown(arr) {
  var selectedList = document.getElementById("selectBox");
  var selectedString = selectedList.selectedIndex;
  for (var i = 0; i < arr.length; i++) {
    var option = document.createElement("option");

    option.value = arr[i].values;
    option.text = arr[i].name;
    selectedList.appendChild(option);
  }
}
document.getElementById("selectBox").addEventListener("change", setGaugeValue);
function setGaugeValue() {
  var selectedList = document.getElementById("selectBox");
  var selectedValue = selectedList.options[selectedList.selectedIndex].value;
  var selectedString = selectedList.selectedIndex;
  var stringGaugeArray = selectedValue.split(",");
  var gaugeDropDown = document.getElementById("gauge");
  gaugeDropDown.innerHTML = "";
  for (var i = 0; i < stringGaugeArray.length; i++) {
    var option = document.createElement("option");
    option.text = stringGaugeArray[i];
    option.value = getValues(selectedString)[i];
    gaugeDropDown.appendChild(option);
  }
  // createDropDown(stringGaugeArray, true);
}
document.getElementById("gauge").addEventListener("change", setUnitWeight);
function setUnitWeight() {
  var gauge = document.getElementById("gauge");
  var unitWeight = document.getElementById("unit-weight");
  var gaugeValue = gauge.options[gauge.selectedIndex].value;
  unitWeight.value = Number(gaugeValue).toFixed(5);
}

document.getElementById("pitch_unit").addEventListener("change", setFrequency);
function getValues(index) {
  switch (index) {
    case 0:
      return plainSteelValues;
    case 1:
      return nickelPlatedSteel;
    case 2:
      return stainlessSteelRoundWound;
    case 3:
      return stainlessSteelHalfRoundWound;
    case 4:
      return stainlessSteelFlatWound;
    case 5:
      return phosphorBronzeRoundWound;
    case 6:
      return PhosphorBronzePolished;
    case 7:
      return BrassRoundWound80;
    case 8:
      return BrassRoundWound85;
    case 9:
      return clearNylon;
    case 10:
      return silverCopperPlatedIron;
  }
}

function createPitchDropDown() {
  var pitch = document.getElementById("pitch_unit");
  for (var i = 0; i < pitchNames.length; i++) {
    var option = document.createElement("option");

    option.value = pitchFrequency[i];
    option.text = pitchNames[i];
    selectedList.appendChild(option);
  }
}

function calStringTension() {
  let result = document.getElementById("result");
  let length = document.getElementById("scale-length").value;
  let frequency = document.getElementById("frequency").value;
  let unitWeight = document.getElementById("unit-weight").value;
  let tension = (Math.pow(frequency * length * 2, 2) * unitWeight) / 386.08858;
  result.innerHTML = tension;
}

function setFrequency() {
  var frequency = document.getElementById("frequency");
  var pitch = document.getElementById("pitch_unit");
  var selectedPitch = pitch.options[pitch.selectedIndex].value;
  frequency.value = selectedPitch;
}
function setValues() {
  createDropDown(stringType);
  createPitchDropDown();
  setGaugeValue();
  setUnitWeight();
  setFrequency();
}

setValues();
